{"componentChunkName":"component---src-templates-post-template-tsx","path":"/2022-11-20-AWS-EKS-on-Kafka-vs-MSK/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>EKS on Kafka, MSK</h1>\n<p>Kafka는 이벤트 기반 아키텍처나 MSA 등등 현대 아키텍처 메세지 브로커로 빼놓을 수 없는 요소입니다.</p>\n<p>EKS 또한 대부분의 애플리케이션을 컨테이너로 배포하는 와중에 거의 필수적으로 사용하는 쿠버네티스를 보다 더 편리하게 사용할 때 많이 사용하는 요소입니다.</p>\n<p>그러면 Kafka를 EKS에 올려서 사용하는 케이스에 대해 어떤 방법이 있는지, 장단점이 무엇인지 알아봅시다.</p>\n<h2>어떤 방법들이 있을까?</h2>\n<p>EKS(K8S)에 카프카를 배포하는 방식에는 여러가지가 있을 것 같습니다.</p>\n<ol>\n<li><a href=\"https://github.com/strimzi/strimzi-kafka-operator\" target=\"_blank\" rel=\"nofollow\">Manage Kafka on Kubernetes: Strimzi</a></li>\n<li><a href=\"https://github.com/banzaicloud/koperator\" target=\"_blank\" rel=\"nofollow\">Banzai Cloud</a></li>\n<li><a href=\"https://docs.confluent.io/operator/current/co-deploy-cfk.html\" target=\"_blank\" rel=\"nofollow\">Confluent</a></li>\n<li><a href=\"https://artifacthub.io/packages/helm/bitnami/kafka\" target=\"_blank\" rel=\"nofollow\">Bitnami Kafka Helm chart</a></li>\n</ol>\n<p>위 방식들 말고도 여러 방법들이 있을 수 있습니다 :)</p>\n<h2>EKS on Kafka에서 생각해 볼 수 있는 점</h2>\n<p>아무래도 직접 클러스터를 관리하다 보니 그 과정에서 배우는건 많을 것 같습니다. 그리고 모든것이 Admin의 통제 하에 관리되니 자유도나 디버깅 환경 또한 관리형 서비스보다는 편할 듯 싶습니다.</p>\n<p>그러나 그 이외 부분에서는 제 지식의 한계인지 더 좋은점은 생각하지 못했습니다. 대부분의 케이스에서 heavy lifting한 작업을 대신해주는 관리형 서비스가 낫다는 생각을 떨칠수가 없네요..</p>\n<p>구축하는 레퍼런스는 아래와 같은 사이트들이 있습니다.</p>\n<ul>\n<li><a href=\"https://medium.com/@JinnaBalu/kafka-cluster-on-amezon-eks-cluster-5850d67ae723\" target=\"_blank\" rel=\"nofollow\">https://medium.com/@JinnaBalu/kafka-cluster-on-amezon-eks-cluster-5850d67ae723</a></li>\n<li><a href=\"https://portworx.com/run-ha-kafka-amazon-elastic-container-service-kubernetes/\" target=\"_blank\" rel=\"nofollow\">https://portworx.com/run-ha-kafka-amazon-elastic-container-service-kubernetes/</a></li>\n</ul>\n<h2>Amazon Managed Streaming for Apache Kafka(MSK)</h2>\n<p>AWS에서는 Kafka를 managed service로 제공하는 MSK가 있습니다.</p>\n<p>위에서 잠깐 얘기했지만, 사실 대부분의 상황에서 MSK를 쓰는게 나을 것 같다는 생각입니다. 직접 설치 운영은 업데이트나 관리 측면에서 어려움을 겪을 확률이 크기 때문이고, Heavy lifting을 피할 수 있으면\n피하는게 낫지 않을까라는 생각입니다.</p>\n<p>그리고 관리 측면을 제외하더라도, EKS와 달리 MSK는 <strong>inter-az 데이터 전송 비용이 무료</strong>이기 때문에 이러한 부분또한 고려해보면 좋습니다.</p>\n<h1>결론</h1>\n<p>아무래도 요즘 대부분의 케이스에서 직접 클러스터를 구축해서 사용하는 것 보다는 관리형 서비스를 사용하는게 여러가지 측면에서 효율성이 좋은 것 같습니다. 단, 회사의 규모가 너무 커서 On-premise에 직접\n클러스터를 구축해서 관리해야 하는 상황이나 회사의 상황에 맞춰 특정 기능을 커스터마이징 해야 하는 상황 같은 경우 직접 해야 할 수도 있다고 생각합니다.</p>","frontmatter":{"title":"Amazon EKS on Kafka vs MSK","summary":"aws eks on kafka vs msk","date":"2022.11.20.","categories":["AWS","EKS","K8S","kubernetes","docker","kafka","msk"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABR0lEQVR42q2My07CUBRF7986MioxKDFBy0NRGGgAefgKmoZqUIrQIu2lpRKjzvwJy7s0qONt7iWNwriDlX3OOjuHjOoW/IQMFQN+MVIMkKGqYaC00G/MWZ49+p7nu/bn/3XZLzJQVUx1HT9WB98dEy6l+DINzpTqcNuU58xo8zvzjq7BZTdKuWOwzqCpgji0iferM9wIYYjRPViFLCqJOO4P43i7LKJbzOHlPA/lOIVyTEA1eYAPsYRXfjuFGN2FFI/wzoQ2QRyjAbNwgsTqCrLbG3hIxpAPBVASQrhLCLgIb6GVSSEXCiATXOdZOYqgvB/mWdjZRDq4hqd0EuwX6WkVjA0Zs24DU+sRI6MKp1PDxKxxPzFlPjPH8DpzL8N9rnM3NmWwX6RHb2FTCZ+6BFuX4O0L6IvwzpJjPeaJ3RbhJ8Q2r+Env9iThRafr5sVAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/3297c2108bee90ef3cdff4b299a3baeb/9b7d7/2022-11-20-thumbnail.png","srcSet":"/static/3297c2108bee90ef3cdff4b299a3baeb/5d231/2022-11-20-thumbnail.png 192w,\n/static/3297c2108bee90ef3cdff4b299a3baeb/e1116/2022-11-20-thumbnail.png 384w,\n/static/3297c2108bee90ef3cdff4b299a3baeb/9b7d7/2022-11-20-thumbnail.png 768w","sizes":"(min-width: 768px) 768px, 100vw"},"sources":[{"srcSet":"/static/3297c2108bee90ef3cdff4b299a3baeb/a3a09/2022-11-20-thumbnail.webp 192w,\n/static/3297c2108bee90ef3cdff4b299a3baeb/5358b/2022-11-20-thumbnail.webp 384w,\n/static/3297c2108bee90ef3cdff4b299a3baeb/81e8e/2022-11-20-thumbnail.webp 768w","type":"image/webp","sizes":"(min-width: 768px) 768px, 100vw"}]},"width":768,"height":402}},"publicURL":"/static/3297c2108bee90ef3cdff4b299a3baeb/2022-11-20-thumbnail.png"}}}}]}},"pageContext":{"slug":"/2022-11-20-AWS-EKS-on-Kafka-vs-MSK/"}},"staticQueryHashes":[],"slicesMap":{}}